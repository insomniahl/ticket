/*!
 * etag
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */

"use strict";function entitytag(t){if(0===t.length)return'"0-1B2M2Y8AsgTpgAmY7PhCfg"';var e=crypto.createHash("md5").update(t,"utf8").digest("base64").replace(base64PadCharRegExp,""),r="string"==typeof t?Buffer.byteLength(t,"utf8"):t.length;return'"'+r.toString(16)+"-"+e+'"'}function etag(t,e){if(null==t)throw new TypeError("argument entity is required");var r=isstats(t),n=e&&"boolean"==typeof e.weak?e.weak:r;if(!r&&"string"!=typeof t&&!Buffer.isBuffer(t))throw new TypeError("argument entity must be string, Buffer, or fs.Stats");var i=r?stattag(t):entitytag(t);return n?"W/"+i:i}function isstats(t){return"function"==typeof Stats&&t instanceof Stats||t&&"object"==typeof t&&"ctime"in t&&"[object Date]"===toString.call(t.ctime)&&"mtime"in t&&"[object Date]"===toString.call(t.mtime)&&"ino"in t&&"number"==typeof t.ino&&"size"in t&&"number"==typeof t.size}function stattag(t){var e=t.mtime.getTime().toString(16),r=t.size.toString(16);return'"'+r+"-"+e+'"'}module.exports=etag;var crypto=require("crypto"),Stats=require("fs").Stats,base64PadCharRegExp=/=+$/,toString=Object.prototype.toString;