/*!
 * range-parser
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015-2016 Douglas Christopher Wilson
 * MIT Licensed
 */

"use strict";function rangeParser(n,t,e){var r=t.indexOf("=");if(r===-1)return-2;var a=t.slice(r+1).split(","),s=[];s.type=t.slice(0,r);for(var i=0;i<a.length;i++){var d=a[i].split("-"),o=parseInt(d[0],10),u=parseInt(d[1],10);isNaN(o)?(o=n-u,u=n-1):isNaN(u)&&(u=n-1),u>n-1&&(u=n-1),isNaN(o)||isNaN(u)||o>u||o<0||s.push({start:o,end:u})}return s.length<1?-1:e&&e.combine?combineRanges(s):s}function combineRanges(n){for(var t=n.map(mapWithIndex).sort(sortByRangeStart),e=0,r=1;r<t.length;r++){var a=t[r],s=t[e];a.start>s.end+1?t[++e]=a:a.end>s.end&&(s.end=a.end,s.index=Math.min(s.index,a.index))}t.length=e+1;var i=t.sort(sortByRangeIndex).map(mapWithoutIndex);return i.type=n.type,i}function mapWithIndex(n,t){return{start:n.start,end:n.end,index:t}}function mapWithoutIndex(n){return{start:n.start,end:n.end}}function sortByRangeIndex(n,t){return n.index-t.index}function sortByRangeStart(n,t){return n.start-t.start}module.exports=rangeParser;