/*
* bootstrap-table - v1.11.0 - 2016-07-02
* https://github.com/wenzhixin/bootstrap-table
* Copyright (c) 2016 zhixin wen
* Licensed MIT License
*/

!function(o){"use strict";var t={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"},e=function(o){var t=o.$header;return o.options.height&&(t=o.$tableHeader),t},i=function(o){var t="select, input";return o.options.height&&(t="table select, table input"),t},r=function(){return!!navigator.cookieEnabled},s=function(o,t){for(var e=-1,i=0;i<t.length;i++)if(o.toLowerCase()===t[i].toLowerCase()){e=i;break}return e},n=function(o,t,e){return o.options.cookie&&r()&&""!==o.options.cookieIdTable&&-1!==s(t,o.options.cookiesEnabled)?(t=o.options.cookieIdTable+"."+t,!(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))&&(document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+c(o.options.cookieExpire)+(o.options.cookieDomain?"; domain="+o.options.cookieDomain:"")+(o.options.cookiePath?"; path="+o.options.cookiePath:"")+(o.cookieSecure?"; secure":""),!0)):void 0},p=function(o,t,e){return e?-1===s(e,o.options.cookiesEnabled)?null:(e=t+"."+e,decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null):null},a=function(o){return!!o&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(o).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},l=function(o,t,e,i){return t=o+"."+t,!!a(t)&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:"")+(e?"; path="+e:""),!0)},c=function(o){var t=o.replace(/[0-9]*/,"");switch(o=o.replace(/[A-Za-z]/,""),t.toLowerCase()){case"s":o=+o;break;case"mi":o=60*o;break;case"h":o=60*o*60;break;case"d":o=24*o*60*60;break;case"m":o=30*o*24*60*60;break;case"y":o=365*o*24*60*60;break;default:o=void 0}return void 0===o?"":"; max-age="+o},h=function(r){setTimeout(function(){var s=JSON.parse(p(r,r.options.cookieIdTable,t.filterControl));if(!r.options.filterControlValuesLoaded&&s){r.options.filterControlValuesLoaded=!0;var n={},a=e(r),l=i(r),c=function(t,e){o(e).each(function(e,i){o(t).val(i.text),n[i.field]=i.text})};a.find(l).each(function(){var t=o(this).closest("[data-field]").data("field"),e=o.grep(s,function(o){return o.field===t});c(this,e)}),r.initColumnSearch(n)}},250)};o.extend(o.fn.bootstrapTable.defaults,{cookie:!1,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],filterControls:[],filterControlValuesLoaded:!1}),o.fn.bootstrapTable.methods.push("deleteCookie");var u=o.fn.bootstrapTable.Constructor,b=u.prototype.init,f=u.prototype.initTable,y=u.prototype.initServer,d=u.prototype.onSort,g=u.prototype.onPageNumber,m=u.prototype.onPageListChange,k=u.prototype.onPageFirst,C=u.prototype.onPagePre,N=u.prototype.onPageNext,T=u.prototype.onPageLast,v=u.prototype.toggleColumn,x=u.prototype.selectPage,P=u.prototype.onSearch;u.prototype.init=function(){if(this.options.filterControls=[],this.options.filterControlValuesLoaded=!1,this.options.cookiesEnabled="string"==typeof this.options.cookiesEnabled?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled,this.options.filterControl){var e=this;this.$el.on("column-search.bs.table",function(o,i,r){for(var s=!0,p=0;p<e.options.filterControls.length;p++)if(e.options.filterControls[p].field===i){e.options.filterControls[p].text=r,s=!1;break}s&&e.options.filterControls.push({field:i,text:r}),n(e,t.filterControl,JSON.stringify(e.options.filterControls))}).on("post-body.bs.table",h(e))}b.apply(this,Array.prototype.slice.apply(arguments)),o.extend(o.fn.bootstrapTable.utils,{setCookie:n,getCookie:p})},u.prototype.initServer=function(){var t=this,e=[],i=function(o){return o.filterControl&&"select"===o.filterControl},r=function(o){return o.filterData&&"column"!==o.filterData},s=function(){return t.options.cookie&&t.getCookies(t)};e=o.grep(t.columns,function(o){return i(o)&&!r(o)}),u.prototype.initServer=y,s()&&0===e.length||y.apply(this,Array.prototype.slice.apply(arguments))},u.prototype.initTable=function(){f.apply(this,Array.prototype.slice.apply(arguments)),this.initCookie()},u.prototype.initCookie=function(){if(this.options.cookie){if(""===this.options.cookieIdTable||""===this.options.cookieExpire||!r())throw new Error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies");var e=p(this,this.options.cookieIdTable,t.sortOrder),i=p(this,this.options.cookieIdTable,t.sortName),s=p(this,this.options.cookieIdTable,t.pageNumber),n=p(this,this.options.cookieIdTable,t.pageList),a=JSON.parse(p(this,this.options.cookieIdTable,t.columns)),l=p(this,this.options.cookieIdTable,t.searchText);this.options.sortOrder=e?e:this.options.sortOrder,this.options.sortName=i?i:this.options.sortName,this.options.pageNumber=s?+s:this.options.pageNumber,this.options.pageSize=n?n===this.options.formatAllRows()?n:+n:this.options.pageSize,this.options.searchText=l?l:"",a&&o.each(this.columns,function(t,e){e.visible=-1!==o.inArray(e.field,a)})}},u.prototype.onSort=function(){d.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.sortOrder,this.options.sortOrder),n(this,t.sortName,this.options.sortName)},u.prototype.onPageNumber=function(){g.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.pageNumber,this.options.pageNumber)},u.prototype.onPageListChange=function(){m.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.pageList,this.options.pageSize)},u.prototype.onPageFirst=function(){k.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.pageNumber,this.options.pageNumber)},u.prototype.onPagePre=function(){C.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.pageNumber,this.options.pageNumber)},u.prototype.onPageNext=function(){N.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.pageNumber,this.options.pageNumber)},u.prototype.onPageLast=function(){T.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.pageNumber,this.options.pageNumber)},u.prototype.toggleColumn=function(){v.apply(this,Array.prototype.slice.apply(arguments));var e=[];o.each(this.columns,function(o,t){t.visible&&e.push(t.field)}),n(this,t.columns,JSON.stringify(e))},u.prototype.selectPage=function(o){x.apply(this,Array.prototype.slice.apply(arguments)),n(this,t.pageNumber,o)},u.prototype.onSearch=function(){var e=Array.prototype.slice.apply(arguments);P.apply(this,e),o(e[0].currentTarget).parent().hasClass("search")&&n(this,t.searchText,this.searchText)},u.prototype.getCookies=function(e){var i=[];return o.each(t,function(){var o=JSON.parse(p(e,e.options.cookieIdTable,t.filterControl));i.concat(o)}),i},u.prototype.deleteCookie=function(o){""!==o&&r()&&l(this.options.cookieIdTable,t[o],this.options.cookiePath,this.options.cookieDomain)}}(jQuery);