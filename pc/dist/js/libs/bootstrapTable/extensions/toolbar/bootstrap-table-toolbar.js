!function(t){"use strict";var o=!1,a=t.fn.bootstrapTable.utils.sprintf,e=function(o,e,n,s){if(t("#avdSearchModal_"+s.options.idTable).hasClass("modal"))t("#avdSearchModal_"+s.options.idTable).modal();else{var l=a('<div id="avdSearchModal%s"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">',"_"+s.options.idTable);l+='<div class="modal-dialog modal-xs">',l+=' <div class="modal-content">',l+='  <div class="modal-header">',l+='   <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>',l+=a('   <h4 class="modal-title">%s</h4>',e),l+="  </div>",l+='  <div class="modal-body modal-body-custom">',l+=a('   <div class="container-fluid" id="avdSearchModalContent%s" style="padding-right: 0px;padding-left: 0px;" >',"_"+s.options.idTable),l+="   </div>",l+="  </div>",l+="  </div>",l+=" </div>",l+="</div>",t("body").append(t(l));var r=i(o,n,s),d=0;t("#avdSearchModalContent_"+s.options.idTable).append(r.join("")),t("#"+s.options.idForm).off("keyup blur","input").on("keyup blur","input",function(t){clearTimeout(d),d=setTimeout(function(){s.onColumnAdvancedSearch(t)},s.options.searchTimeOut)}),t("#btnCloseAvd_"+s.options.idTable).click(function(){t("#avdSearchModal_"+s.options.idTable).modal("hide")}),t("#avdSearchModal_"+s.options.idTable).modal()}},i=function(t,o,e){var i=[];i.push(a('<form class="form-horizontal" id="%s" action="%s" >',e.options.idForm,e.options.actionForm));for(var n in t){var s=t[n];!s.checkbox&&s.visible&&s.searchable&&(i.push('<div class="form-group">'),i.push(a('<label class="col-sm-4 control-label">%s</label>',s.title)),i.push('<div class="col-sm-6">'),i.push(a('<input type="text" class="form-control input-md" name="%s" placeholder="%s" id="%s">',s.field,s.title,s.field)),i.push("</div>"),i.push("</div>"))}return i.push('<div class="form-group">'),i.push('<div class="col-sm-offset-9 col-sm-3">'),i.push(a('<button type="button" id="btnCloseAvd%s" class="btn btn-default" >%s</button>',"_"+e.options.idTable,o)),i.push("</div>"),i.push("</div>"),i.push("</form>"),i};t.extend(t.fn.bootstrapTable.defaults,{advancedSearch:!1,idForm:"advancedSearch",actionForm:"",idTable:void 0,onColumnAdvancedSearch:function(t,o){return!1}}),t.extend(t.fn.bootstrapTable.defaults.icons,{advancedSearchIcon:"glyphicon-chevron-down"}),t.extend(t.fn.bootstrapTable.Constructor.EVENTS,{"column-advanced-search.bs.table":"onColumnAdvancedSearch"}),t.extend(t.fn.bootstrapTable.locales,{formatAdvancedSearch:function(){return"Advanced search"},formatAdvancedCloseButton:function(){return"Close"}}),t.extend(t.fn.bootstrapTable.defaults,t.fn.bootstrapTable.locales);var n=t.fn.bootstrapTable.Constructor,s=n.prototype.initToolbar,l=n.prototype.load,r=n.prototype.initSearch;n.prototype.initToolbar=function(){if(s.apply(this,Array.prototype.slice.apply(arguments)),this.options.search&&this.options.advancedSearch&&this.options.idTable){var t=this,o=[];o.push(a('<div class="columns columns-%s btn-group pull-%s" role="group">',this.options.buttonsAlign,this.options.buttonsAlign)),o.push(a('<button class="btn btn-default%s" type="button" name="advancedSearch" title="%s">',void 0===t.options.iconSize?"":" btn-"+t.options.iconSize,t.options.formatAdvancedSearch())),o.push(a('<i class="%s %s"></i>',t.options.iconsPrefix,t.options.icons.advancedSearchIcon)),o.push("</button></div>"),t.$toolbar.prepend(o.join("")),t.$toolbar.find('button[name="advancedSearch"]').off("click").on("click",function(){e(t.columns,t.options.formatAdvancedSearch(),t.options.formatAdvancedCloseButton(),t)})}},n.prototype.load=function(a){if(l.apply(this,Array.prototype.slice.apply(arguments)),this.options.advancedSearch&&"undefined"!=typeof this.options.idTable&&!o){var e=parseInt(t(".bootstrap-table").height());e+=10,t("#"+this.options.idTable).bootstrapTable("resetView",{height:e}),o=!0}},n.prototype.initSearch=function(){if(r.apply(this,Array.prototype.slice.apply(arguments)),this.options.advancedSearch){var o=this,a=t.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=a?t.grep(this.data,function(e,i){for(var n in a){var s=a[n].toLowerCase(),l=e[n];if(l=t.fn.bootstrapTable.utils.calculateObjectValue(o.header,o.header.formatters[t.inArray(n,o.header.fields)],[l,e,i],l),t.inArray(n,o.header.fields)===-1||"string"!=typeof l&&"number"!=typeof l||(l+"").toLowerCase().indexOf(s)===-1)return!1}return!0}):this.data}},n.prototype.onColumnAdvancedSearch=function(o){var a=t.trim(t(o.currentTarget).val()),e=t(o.currentTarget)[0].id;t.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),a?this.filterColumnsPartial[e]=a:delete this.filterColumnsPartial[e],this.options.pageNumber=1,this.onSearch(o),this.updatePagination(),this.trigger("column-advanced-search",e,a)}}(jQuery);