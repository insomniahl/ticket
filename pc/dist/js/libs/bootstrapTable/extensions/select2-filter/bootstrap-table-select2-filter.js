!function(t){"use strict";function e(t){var e=t.$header;return t.options.height&&(e=t.$tableHeader),e}function i(t){return e(t).find("[data-filter-field]")}function a(e){var a=i(e);t.isEmptyObject(e.filterColumnsPartial)||a.each(function(i,a){var r=t(a),l=r.attr("data-filter-field"),n=e.filterColumnsPartial[l];r.is("select")?r.val(n).trigger("change"):r.val(n)})}function r(e,i){var a,r,l=!1,n=0;if(t.each(e.columns,function(e,n){if(a="hidden",r=[],n.visible){if(n.filter){var o=n.filter.class?" "+n.filter.class:"";switch(r.push('<div style="margin: 0px 2px 2px 2px;" class="filter'+o+'">'),n.searchable&&(l=!0,a="visible"),n.filter.type.toLowerCase()){case"input":r.push('<input type="text" data-filter-field="'+n.field+'" style="width: 100%; visibility:'+a+'">');break;case"select":r.push('<select data-filter-field="'+n.field+'" style="width: 100%; visibility:'+a+'"></select>')}}else r.push('<div class="no-filter"></div>');t.each(i.children().children(),function(e,i){if(i=t(i),i.data("field")===n.field)return i.find(".fht-cell").append(r.join("")),!1})}}),l){var o=i.find("input"),s=i.find("select");o.length>0&&(o.off("keyup").on("keyup",function(t){clearTimeout(n),n=setTimeout(function(){e.onColumnSearch(t)},e.options.searchTimeOut)}),o.off("mouseup").on("mouseup",function(i){var a=t(this),r=a.val();""!==r&&setTimeout(function(){var t=a.val();""===t&&(clearTimeout(n),n=setTimeout(function(){e.onColumnSearch(i)},e.options.searchTimeOut))},1)})),s.length>0&&s.on("select2:select",function(t){e.onColumnSearch(t)})}else i.find(".filter").hide()}function l(i){var a=e(i);t.each(i.columns,function(t,e){if(e.filter&&"select"===e.filter.type){var r=a.find("select[data-filter-field="+e.field+"]");if(r.length>0&&!r.data().select2){e.filter.data.unshift("");var l={placeholder:"",allowClear:!0,data:e.filter.data,dropdownParent:i.$el.closest(".bootstrap-table")};r.select2(l),r.on("select2:unselecting",function(t){t.preventDefault(),r.val(null).trigger("change"),i.searchText=void 0,i.onColumnSearch(t)})}}})}t.extend(t.fn.bootstrapTable.defaults,{filter:!1,filterValues:{}}),t.extend(t.fn.bootstrapTable.COLUMN_DEFAULTS,{filter:void 0});var n=t.fn.bootstrapTable.Constructor,o=n.prototype.init,s=n.prototype.initHeader,f=n.prototype.initSearch;n.prototype.init=function(){if(this.options.filter){var e=this;t.isEmptyObject(e.options.filterValues)||(e.filterColumnsPartial=e.options.filterValues,e.options.filterValues={}),this.$el.on("reset-view.bs.table",function(){e.options.height&&(e.$tableHeader.find("select").length>0||e.$tableHeader.find("input").length>0||r(e,e.$tableHeader))}).on("post-header.bs.table",function(){var t=0;l(e),clearTimeout(t),t=setTimeout(function(){a(e)},e.options.searchTimeOut-1e3)}).on("column-switch.bs.table",function(t,i){a(e)})}o.apply(this,Array.prototype.slice.apply(arguments))},n.prototype.initHeader=function(){s.apply(this,Array.prototype.slice.apply(arguments)),this.options.filter&&r(this,this.$header)},n.prototype.initSearch=function(){f.apply(this,Array.prototype.slice.apply(arguments));var e=this,i=e.filterColumnsPartial;"client"===e.options.sidePagination&&(this.data=t.grep(this.data,function(a,r){for(var l in i){var n=e.columns[t.fn.bootstrapTable.utils.getFieldIndex(e.columns,l)],o=i[l].toLowerCase(),s=a[l];if(s=t.fn.bootstrapTable.utils.calculateObjectValue(e.header,e.header.formatters[t.inArray(l,e.header.fields)],[s,a,r],s),n.filterStrictSearch){if(t.inArray(l,e.header.fields)===-1||"string"!=typeof s&&"number"!=typeof s||s.toString().toLowerCase()!==o.toString().toLowerCase())return!1}else if(t.inArray(l,e.header.fields)===-1||"string"!=typeof s&&"number"!=typeof s||(s+"").toLowerCase().indexOf(o)===-1)return!1}return!0}))},n.prototype.onColumnSearch=function(e){var i=t(e.currentTarget).attr("data-filter-field"),a=t.trim(t(e.currentTarget).val());t.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),a?this.filterColumnsPartial[i]=a:delete this.filterColumnsPartial[i],this.options.pageNumber=1,this.onSearch(e)},n.prototype.setFilterData=function(i,a){var r=this,l=e(r),n=l.find('select[data-filter-field="'+i+'"]');a.unshift(""),n.empty(),n.select2({data:a,placeholder:"",allowClear:!0,dropdownParent:r.$el.closest(".bootstrap-table")}),t.each(this.columns,function(t,e){if(e.field===i)return e.filter.data=a,!1})},n.prototype.setFilterValues=function(t){this.filterColumnsPartial=t},t.fn.bootstrapTable.methods.push("setFilterData"),t.fn.bootstrapTable.methods.push("setFilterValues")}(jQuery);