!function(t){"use strict";var o,i="data-tt-id",e="data-tt-parent-id",n={},p=void 0,r=function(o,i){for(var e=o.$body.find("tr").not("[data-tt-parent-id]"),n=0;n<e.length;n++)if(n===i)return t(e[n]).attr("data-tt-id")},a=function(o,i){var e={};return t.each(i,function(i,n){if(!n.IsParent)for(var p in n)isNaN(parseFloat(n[p]))||o.columns[t.fn.bootstrapTable.utils.getFieldIndex(o.columns,p)].groupBySumGroup&&(void 0===e[p]&&(e[p]=0),e[p]+=+n[p])}),e},s=function(t,r){return o.apply([t,r]),n[i.toString()]=r,t.IsParent?(p=r,delete n[e.toString()]):n[e.toString()]=void 0===p?r:p,n},l=function(t,o){for(var i=[],e=0;e<t.options.groupByField.length;e++)i.push(o[t.options.groupByField[e]]);return i},u=function(t,o,i){for(var e={},n=0;n<t.options.groupByField.length;n++)e[t.options.groupByField[n].toString()]=o[i][0][t.options.groupByField[n]];return e.IsParent=!0,e},d=function(o,i){var e={};return t.each(o,function(t,o){var n=JSON.stringify(i(o));e[n]=e[n]||[],e[n].push(o)}),Object.keys(e).map(function(t){return e[t]})},y=function(o,i){for(var e=[],n={},p=d(i,function(t){return l(o,t)}),r=0;r<p.length;r++)p[r].unshift(u(o,p,r)),o.options.groupBySumGroup&&(n=a(o,p[r]),t.isEmptyObject(n)||p[r].push(n));return e=e.concat.apply(e,p),!o.options.loaded&&e.length>0&&(o.options.loaded=!0,o.options.originalData=o.options.data,o.options.data=e),e};t.extend(t.fn.bootstrapTable.defaults,{groupBy:!1,groupByField:[],groupBySumGroup:!1,groupByInitExpanded:void 0,loaded:!1,originalData:void 0}),t.fn.bootstrapTable.methods.push("collapseAll","expandAll","refreshGroupByField"),t.extend(t.fn.bootstrapTable.COLUMN_DEFAULTS,{groupBySumGroup:!1});var h=t.fn.bootstrapTable.Constructor,g=h.prototype.init,f=h.prototype.initData;h.prototype.init=function(){if(!this.options.sortName&&this.options.groupBy&&this.options.groupByField.length>0){var i=this;Object.keys||t.fn.bootstrapTable.utils.objectKeys(),this.options.loaded=!1,this.options.originalData=void 0,o=this.options.rowAttributes,this.options.rowAttributes=s,this.$el.on("post-body.bs.table",function(){i.$el.treetable({expandable:!0,onNodeExpand:function(){i.options.height&&i.resetHeader()},onNodeCollapse:function(){i.options.height&&i.resetHeader()}},!0),void 0!==i.options.groupByInitExpanded&&("number"==typeof i.options.groupByInitExpanded?i.expandNode(i.options.groupByInitExpanded):"all"===i.options.groupByInitExpanded.toLowerCase()&&i.expandAll())})}g.apply(this,Array.prototype.slice.apply(arguments))},h.prototype.initData=function(t,o){this.options.sortName||this.options.groupBy&&this.options.groupByField.length>0&&(this.options.groupByField="string"==typeof this.options.groupByField?this.options.groupByField.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.groupByField,t=y(this,t?t:this.options.data)),f.apply(this,[t,o])},h.prototype.expandAll=function(){this.$el.treetable("expandAll")},h.prototype.collapseAll=function(){this.$el.treetable("collapseAll")},h.prototype.expandNode=function(t){t=r(this,t),void 0!==t&&this.$el.treetable("expandNode",t)},h.prototype.refreshGroupByField=function(o){t.fn.bootstrapTable.utils.compareObjects(this.options.groupByField,o)||(this.options.groupByField=o,this.load(this.options.originalData))}}(jQuery);